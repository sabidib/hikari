<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>hikari.impl.event_manager API documentation</title>
<meta name="description" content="Event handling logic for more info.">
<meta property="og:title" content="hikari.impl.event_manager module list">
<meta property="og:type" content="website">
<meta property="og:image" content="https://hikari-py.github.io/hikari/logo.png">
<meta property="og:description" content="A Discord Bot framework for modern Python and asyncio built on good intentions">
<meta property="theme-color" content="#ff029a">
<link rel="shortcut icon" type="image/png" href="../../logo.png">
<!--<script async src="https://cse.google.com/cse.js?cx=017837193012385208679:pey8ky8gdqw"></script>
<style>.gsc-control-cse {padding:0 !important;margin-top:1em}</style>-->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css" rel="stylesheet">
<style>
img#logo {
border-radius: 15px;
width: 30px;
height: 30px;
margin-right: 0.5em;
text-indent: 100%;
white-space: nowrap;
overflow: hidden;
}
small.smaller {
font-size: 0.50em;
}
html {
height: 100%;
scroll-behavior: smooth;
scrollbar-color: #202324 #454a4d;
}
body {
background-color: #181A1B;
color: #C9C5C0;
height: fit-content;
}
h1 {
margin-top: 3rem;
}
h2 {
margin-top: 1.75rem;
margin-bottom: 1em;
}
h3 {
margin-top: 1.25rem;
}
h4 {
margin-top: 1rem;
}
.nav-section {
margin-top: 2em;
}
.monospaced {
font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}
a.sidebar-nav-pill,
a.sidebar-nav-pill:active,
a.sidebar-nav-pill:hover {
color: #BDB7AF;
}
.module-source > details > pre {
display: block;
overflow-x: auto;
overflow-y: auto;
max-height: 600px;
font-size: 0.8em;
}
a {
color: #DE4F91;
}
a:hover {
color: #64B1F2;
}
.container > li {
margin-left: 1em;
margin-top: 2.5em;
}
.jumbotron {
background-color: #232627;
}
.breadcrumb-item.inactive > a {
color: #d264d0 !important;
}
.breadcrumb-item.active > a {
color: #de4f91 !important;
}
.breadcrumb-item+.breadcrumb-item::before {
content: ".";
}
.module-breadcrumb {
padding-left: 0 !important;
background-color: #232627;
}
ul.nested {
margin-left: 1em;
}
h2#parameters::after {
margin-left: 2em;
}
.anchor:target {
background-color: var(--dark);
}
@media screen and (max-width: 990px) {
.anchor:target {
margin-left: -2em;
padding-left: 2em;
}
}
@media screen and (min-width: 990px) {
.anchor:target {
border-radius: 0.5em; !important
margin-right: -2em;
padding-right: 2em;
margin-top: -1em;
padding-top: 1em;
}
}
dt {
margin-left: 2em;
}
dd {
margin-left: 4em;
}
dl.no-nest > dt {
margin-left: 0em;
}
dl.no-nest > dd {
margin-left: 2em;
}
dl.root {
margin-bottom: 2em;
}
.definition {
display: block;
margin-bottom: 8em !important;
}
.definition .row {
display: block;
margin-bottom: 4em !important;
}
.definition h2 {
font-size: 1em;
font-weight: bolder;
}
.sep {
height: 2em;
}
code {
color: #DB61D9;
}
code .active {
color: #e83e8c;
}
code a {
color: #E94A93;
}
a.dotted:hover, abbr:hover {
text-decoration: underline #9E9689 dotted !important;
}
a.dotted, abbr {
text-decoration: none !important;
}
.gsc-search-box, .gsc-search-box-tools, .gsc-control-cse {
background: none !important;
border: none !important;
}
.gsc-search-button-v2, .gsc-search-button-v2:hover, .gsc-search-button-v2:focus {
color: var(--success) !important;
border-color: var(--success) !important;
background: none !important;
padding: 6px 32px !important;
font-size: inherit !important;
}
.gsc-search-button-v2 > svg {
fill: var(--success) !important;
}
.gsc-input-box {
border-radius: 3px;
}
.gsc-control-cse {
width: 300px !important;
margin-top: 0 !important;
}
.gsc-control-cse .gsc-control-cse-en {
margin-top: 0 !important;
}
.bg-dark {
background-color: #2C2F31 !important;
}
.text-muted {
color: #9E9689 !important;
}
.alert-primary {
color: #7CC3FF;
background-color: #262A2B;
border-color: #003B7B;
}
.alert-secondary {
color: #C2BCB4;
background-color: #282B2C;
border-color: #3B4042;
}
.alert-success {
color: #99E6AB;
background-color: #1A3E29;
border-color: #255A32;
}
.alert-info {
color: #8EE3F1;
background-color: #143B43;
border-color: #1E5961;
}
.alert-warning {
color: #FBD770;
background-color: #513E00;
border-color: #7B5C00;
}
.alert-danger {
color: rgb(225, 134, 143);
background-color: rgb(67, 12, 17);
border-color: rgb(104, 18, 27);
}
mark {
background-color: #333333;
border-radius: 0.1em;
color: #DB61D9;
}
</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<nav id="main-nav" class="navbar navbar-dark navbar-expand-lg bg-dark">
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"/>
</button>
<a class="navbar-brand" href="https://github.com/hikari-py/hikari"><img class="d-inline-block align-top" src="../../logo.png" id="logo" alt="hikari logo" loading="lazy"/>Hikari <small class="smaller">2.0.0.dev102</small></a>
<div class="collapse navbar-collapse" id="navbarNavDropdown">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" href="../../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link active" href="../../hikari/index.html">Documentation</a></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/hikari-py/hikari">GitHub</a></li>
<li class="nav-item"><a class="nav-link" href="https://pypi.org/project/hikari">PyPI</a></li>
<li class="nav-item"><a class="nav-link" href="https://discord.gg/Jx4cNGG">Discord Server</a></li>
</ul>
<form class="form-inline" action="../../hikari/search.html">
<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" id="lunr-search" name="q"/>
<button class="btn btn-outline-success my-2 my-sm-0" type="submit">&gt;</button>
</form>
</div>
</nav>
<div class="jumbotron jumbotron-fluid">
<div class="container">
<h1 class="display-4"><code>
<nav aria-label="breadcrumb">
<ol class="breadcrumb module-breadcrumb">
<li class="breadcrumb-item inactive"><a title="hikari -- A sane Python framework for writing modern Discord bots …" href="../index.html"
>hikari</a></li>
<li class="breadcrumb-item inactive"><a title="hikari.impl -- Basic implementations of application components …" href="index.html"
>impl</a></li>
<li class="breadcrumb-item active"><a href="#">event_manager</a></li>
</ol>
</nav>
</code></h1>
<p class="lead"><p>Event handling logic for more info.</p></p>
</div>
</div>
<div class="container-xl">
<div class="row">
<div class="d-md-none d-lg-block col-lg-5 col-xl-4">
<!--<nav class="nav" id="content-nav">-->
<h3>This module</h3>
<ul class="list-unstyled text-truncate">
<li class="monospaced text-truncate">
<small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventManagerImpl -- Provides event handling logic for Discord events." href="#hikari.impl.event_manager.EventManagerImpl"
>EventManagerImpl</a>
<ul class="list-unstyled nested text-truncate">
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="consume_raw_event -- Consume a raw event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.consume_raw_event"
>consume_raw_event</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="dispatch -- Dispatch an event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.dispatch"
>dispatch</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="get_listeners -- Get the listeners for a given event type, if there are any …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.get_listeners"
>get_listeners</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="listen -- Generate a decorator to subscribe a callback to an event type …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.listen"
>listen</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_channel_create -- See https://discord.com/developers/docs/topics/gateway#channel-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_channel_create"
>on_channel_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_channel_delete -- See https://discord.com/developers/docs/topics/gateway#channel-delete for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_channel_delete"
>on_channel_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_channel_pins_update -- See https://discord.com/developers/docs/topics/gateway#channel-pins-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_channel_pins_update"
>on_channel_pins_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_channel_update -- See https://discord.com/developers/docs/topics/gateway#channel-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_channel_update"
>on_channel_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_ban_add -- See https://discord.com/developers/docs/topics/gateway#guild-ban-add for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_ban_add"
>on_guild_ban_add</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_ban_remove -- See https://discord.com/developers/docs/topics/gateway#guild-ban-remove for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_ban_remove"
>on_guild_ban_remove</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_create -- See https://discord.com/developers/docs/topics/gateway#guild-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_create"
>on_guild_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_delete -- See https://discord.com/developers/docs/topics/gateway#guild-delete for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_delete"
>on_guild_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_emojis_update -- See https://discord.com/developers/docs/topics/gateway#guild-emojis-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_emojis_update"
>on_guild_emojis_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_integrations_update -- See https://discord.com/developers/docs/topics/gateway#guild-integrations-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_integrations_update"
>on_guild_integrations_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_member_add -- See https://discord.com/developers/docs/topics/gateway#guild-member-add for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_add"
>on_guild_member_add</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_member_remove -- See https://discord.com/developers/docs/topics/gateway#guild-member-remove for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_remove"
>on_guild_member_remove</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_member_update -- See https://discord.com/developers/docs/topics/gateway#guild-member-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_update"
>on_guild_member_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_members_chunk -- See https://discord.com/developers/docs/topics/gateway#guild-members-chunk for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_members_chunk"
>on_guild_members_chunk</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_role_create -- See https://discord.com/developers/docs/topics/gateway#guild-role-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_create"
>on_guild_role_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_role_delete -- See https://discord.com/developers/docs/topics/gateway#guild-role-delete for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_delete"
>on_guild_role_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_role_update -- See https://discord.com/developers/docs/topics/gateway#guild-role-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_update"
>on_guild_role_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_guild_update -- See https://discord.com/developers/docs/topics/gateway#guild-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_guild_update"
>on_guild_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_integration_create -- " href="#hikari.impl.event_manager.EventManagerImpl.on_integration_create"
>on_integration_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_integration_delete -- " href="#hikari.impl.event_manager.EventManagerImpl.on_integration_delete"
>on_integration_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_integration_update -- " href="#hikari.impl.event_manager.EventManagerImpl.on_integration_update"
>on_integration_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_interaction_create -- See https://discord.com/developers/docs/topics/gateway#interaction-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_interaction_create"
>on_interaction_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_invite_create -- See https://discord.com/developers/docs/topics/gateway#invite-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_invite_create"
>on_invite_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_invite_delete -- See https://discord.com/developers/docs/topics/gateway#invite-delete for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_invite_delete"
>on_invite_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_create -- See https://discord.com/developers/docs/topics/gateway#message-create for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_create"
>on_message_create</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_delete -- See https://discord.com/developers/docs/topics/gateway#message-delete for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_delete"
>on_message_delete</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_delete_bulk -- See https://discord.com/developers/docs/topics/gateway#message-delete-bulk for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_delete_bulk"
>on_message_delete_bulk</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_reaction_add -- See https://discord.com/developers/docs/topics/gateway#message-reaction-add for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_add"
>on_message_reaction_add</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_reaction_remove -- See https://discord.com/developers/docs/topics/gateway#message-reaction-remove for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove"
>on_message_reaction_remove</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_reaction_remove_all -- See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_all"
>on_message_reaction_remove_all</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_reaction_remove_emoji -- See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_emoji"
>on_message_reaction_remove_emoji</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_message_update -- See https://discord.com/developers/docs/topics/gateway#message-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_message_update"
>on_message_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_presence_update -- See https://discord.com/developers/docs/topics/gateway#presence-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_presence_update"
>on_presence_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_ready -- See https://discord.com/developers/docs/topics/gateway#ready for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_ready"
>on_ready</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_resumed -- See https://discord.com/developers/docs/topics/gateway#resumed for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_resumed"
>on_resumed</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_typing_start -- See https://discord.com/developers/docs/topics/gateway#typing-start for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_typing_start"
>on_typing_start</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_user_update -- See https://discord.com/developers/docs/topics/gateway#user-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_user_update"
>on_user_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_voice_server_update -- See https://discord.com/developers/docs/topics/gateway#voice-server-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_voice_server_update"
>on_voice_server_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_voice_state_update -- See https://discord.com/developers/docs/topics/gateway#voice-state-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_voice_state_update"
>on_voice_state_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="on_webhooks_update -- See https://discord.com/developers/docs/topics/gateway#webhooks-update for more info." href="#hikari.impl.event_manager.EventManagerImpl.on_webhooks_update"
>on_webhooks_update</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="stream -- Return a stream iterator for the given event and sub-events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.stream"
>stream</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="subscribe -- Subscribe a given callback to a given event type …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.subscribe"
>subscribe</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A standard Python function.'>def</abbr></em></small> <a title="unsubscribe -- Unsubscribe a given callback from a given event type, if present …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.unsubscribe"
>unsubscribe</a>
</li>
<li class="text-truncate monospaced">
<small class='text-muted'><em><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr></em></small> <a title="wait_for -- Wait for a given event to occur once, then return the event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.wait_for"
>wait_for</a>
</li>
<br />
</ul>
</li>
</ul>
<!--</nav>-->
</div>
<div class="col-xs-12 col-lg-7 col-xl-8">
<div class="row">
<div class="col module-source">
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L1-L494" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python"># -*- coding: utf-8 -*-
# cython: language_level=3
# Copyright (c) 2020 Nekokatt
# Copyright (c) 2021 davfsa
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the &#34;Software&#34;), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
&#34;&#34;&#34;Event handling logic for more info.&#34;&#34;&#34;

from __future__ import annotations

__all__: typing.List[str] = [&#34;EventManagerImpl&#34;]

import asyncio
import base64
import random
import typing

from hikari import channels
from hikari import errors
from hikari import intents as intents_
from hikari import presences
from hikari import snowflakes
from hikari.impl import event_manager_base
from hikari.internal import time

if typing.TYPE_CHECKING:
    from hikari import guilds
    from hikari import invites
    from hikari import voices
    from hikari.api import cache as cache_
    from hikari.api import event_factory as event_factory_
    from hikari.api import shard as gateway_shard
    from hikari.events import guild_events as guild_events
    from hikari.internal import data_binding


def _fixed_size_nonce() -&gt; str:
    # This generates nonces of length 28 for use in member chunking.
    head = time.monotonic_ns().to_bytes(8, &#34;big&#34;)
    tail = random.getrandbits(92).to_bytes(12, &#34;big&#34;)
    return base64.b64encode(head + tail).decode(&#34;ascii&#34;)


async def _request_guild_members(
    shard: gateway_shard.GatewayShard,
    guild: guilds.PartialGuild,
    *,
    include_presences: bool,
    nonce: str,
) -&gt; None:
    try:
        await shard.request_guild_members(guild, include_presences=include_presences, nonce=nonce)

    # Ignore errors raised by a shard shutting down
    except errors.ComponentStateConflictError:
        pass


class EventManagerImpl(event_manager_base.EventManagerBase):
    &#34;&#34;&#34;Provides event handling logic for Discord events.&#34;&#34;&#34;

    __slots__: typing.Sequence[str] = (&#34;_cache&#34;,)

    def __init__(
        self,
        event_factory: event_factory_.EventFactory,
        intents: intents_.Intents,
        /,
        *,
        cache: typing.Optional[cache_.MutableCache] = None,
    ) -&gt; None:
        self._cache = cache
        super().__init__(event_factory=event_factory, intents=intents)

    async def on_ready(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#ready for more info.&#34;&#34;&#34;
        # TODO: cache unavailable guilds on startup, I didn&#39;t bother for the time being.
        event = self._event_factory.deserialize_ready_event(shard, payload)

        if self._cache:
            self._cache.update_me(event.my_user)

        await self.dispatch(event)

    async def on_resumed(self, shard: gateway_shard.GatewayShard, _: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#resumed for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_resumed_event(shard))

    async def on_channel_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_channel_create_event(shard, payload)

        if self._cache:
            assert isinstance(
                event.channel, channels.GuildChannel
            ), &#34;channel create events for DM channels are unexpected&#34;
            self._cache.set_guild_channel(event.channel)

        await self.dispatch(event)

    async def on_channel_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-update for more info.&#34;&#34;&#34;
        old = self._cache.get_guild_channel(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_channel_update_event(shard, payload, old_channel=old)

        if self._cache:
            assert isinstance(
                event.channel, channels.GuildChannel
            ), &#34;channel update events for DM channels are unexpected&#34;
            self._cache.update_guild_channel(event.channel)

        await self.dispatch(event)

    async def on_channel_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-delete for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_channel_delete_event(shard, payload)

        if self._cache:
            self._cache.delete_guild_channel(event.channel.id)

        await self.dispatch(event)

    async def on_channel_pins_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-pins-update for more info.&#34;&#34;&#34;
        # TODO: we need a method for this specifically
        await self.dispatch(self._event_factory.deserialize_channel_pins_update_event(shard, payload))

    async def on_guild_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_create_event(shard, payload)

        if self._cache:
            self._cache.update_guild(event.guild)

            self._cache.clear_guild_channels_for_guild(event.guild.id)
            for channel in event.channels.values():
                self._cache.set_guild_channel(channel)

            self._cache.clear_emojis_for_guild(event.guild.id)
            for emoji in event.emojis.values():
                self._cache.set_emoji(emoji)

            self._cache.clear_roles_for_guild(event.guild.id)
            for role in event.roles.values():
                self._cache.set_role(role)

            # TODO: do we really want to invalidate these all after an outage.
            self._cache.clear_members_for_guild(event.guild.id)
            for member in event.members.values():
                self._cache.set_member(member)

            self._cache.clear_presences_for_guild(event.guild.id)
            for presence in event.presences.values():
                self._cache.set_presence(presence)

            self._cache.clear_voice_states_for_guild(event.guild.id)
            for voice_state in event.voice_states.values():
                self._cache.set_voice_state(voice_state)

            members_declared = self._intents &amp; intents_.Intents.GUILD_MEMBERS
            presences_declared = self._intents &amp; intents_.Intents.GUILD_PRESENCES

            # When intents are enabled discord will only send other member objects on the guild create
            # payload if presence intents are also declared, so if this isn&#39;t the case then we also want
            # to chunk small guilds.
            if members_declared and (event.guild.is_large or not presences_declared):
                # We create a task here instead of awaiting the result to avoid any rate-limits from delaying dispatch.
                nonce = f&#34;{shard.id}.{_fixed_size_nonce()}&#34;
                event.chunk_nonce = nonce
                coroutine = _request_guild_members(
                    shard, event.guild, include_presences=bool(presences_declared), nonce=nonce
                )
                asyncio.create_task(coroutine, name=f&#34;{shard.id}:{event.guild.id} guild create members request&#34;)

        await self.dispatch(event)

    async def on_guild_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-update for more info.&#34;&#34;&#34;
        old = self._cache.get_guild(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_guild_update_event(shard, payload, old_guild=old)

        if self._cache:
            self._cache.update_guild(event.guild)

            self._cache.clear_roles_for_guild(event.guild.id)
            for role in event.roles.values():  # TODO: do we actually get this here?
                self._cache.set_role(role)

            self._cache.clear_emojis_for_guild(event.guild.id)  # TODO: do we actually get this here?
            for emoji in event.emojis.values():
                self._cache.set_emoji(emoji)

        await self.dispatch(event)

    async def on_guild_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-delete for more info.&#34;&#34;&#34;
        event: typing.Union[guild_events.GuildUnavailableEvent, guild_events.GuildLeaveEvent]
        if payload.get(&#34;unavailable&#34;, False):
            event = self._event_factory.deserialize_guild_unavailable_event(shard, payload)

            if self._cache:
                self._cache.set_guild_availability(event.guild_id, False)

        else:
            event = self._event_factory.deserialize_guild_leave_event(shard, payload)

            if self._cache:
                #  TODO: this doesn&#39;t work in all intent scenarios
                self._cache.delete_guild(event.guild_id)
                self._cache.clear_voice_states_for_guild(event.guild_id)
                self._cache.clear_invites_for_guild(event.guild_id)
                self._cache.clear_members_for_guild(event.guild_id)
                self._cache.clear_presences_for_guild(event.guild_id)
                self._cache.clear_guild_channels_for_guild(event.guild_id)
                self._cache.clear_emojis_for_guild(event.guild_id)
                self._cache.clear_roles_for_guild(event.guild_id)

        await self.dispatch(event)

    async def on_guild_ban_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-add for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_guild_ban_add_event(shard, payload))

    async def on_guild_ban_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-remove for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_guild_ban_remove_event(shard, payload))

    async def on_guild_emojis_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-emojis-update for more info.&#34;&#34;&#34;
        guild_id = snowflakes.Snowflake(payload[&#34;guild_id&#34;])
        old = list(self._cache.clear_emojis_for_guild(guild_id).values()) if self._cache else None

        event = self._event_factory.deserialize_guild_emojis_update_event(shard, payload, old_emojis=old)

        if self._cache:
            for emoji in event.emojis:
                self._cache.set_emoji(emoji)

        await self.dispatch(event)

    async def on_guild_integrations_update(self, _: gateway_shard.GatewayShard, __: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-integrations-update for more info.&#34;&#34;&#34;
        # This is only here to stop this being logged or dispatched as an &#34;unknown event&#34;.
        # This event is made redundant by INTEGRATION_CREATE/DELETE/UPDATE and is thus not parsed or dispatched.
        return None

    async def on_integration_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_create_event(shard, payload)
        await self.dispatch(event)

    async def on_integration_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_delete_event(shard, payload)
        await self.dispatch(event)

    async def on_integration_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_update_event(shard, payload)
        await self.dispatch(event)

    async def on_guild_member_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-add for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_member_add_event(shard, payload)

        if self._cache:
            self._cache.update_member(event.member)

        await self.dispatch(event)

    async def on_guild_member_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-remove for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Member] = None
        if self._cache:
            old = self._cache.delete_member(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_guild_member_remove_event(shard, payload, old_member=old)
        await self.dispatch(event)

    async def on_guild_member_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-update for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Member] = None
        if self._cache:
            old = self._cache.get_member(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_guild_member_update_event(shard, payload, old_member=old)

        if self._cache:
            self._cache.update_member(event.member)

        await self.dispatch(event)

    async def on_guild_members_chunk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-members-chunk for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_member_chunk_event(shard, payload)

        if self._cache:
            for member in event.members.values():
                self._cache.set_member(member)

            for presence in event.presences.values():
                self._cache.set_presence(presence)

        await self.dispatch(event)

    async def on_guild_role_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_role_create_event(shard, payload)

        if self._cache:
            self._cache.set_role(event.role)

        await self.dispatch(event)

    async def on_guild_role_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-update for more info.&#34;&#34;&#34;
        old = self._cache.get_role(snowflakes.Snowflake(payload[&#34;role&#34;][&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_guild_role_update_event(shard, payload, old_role=old)

        if self._cache:
            self._cache.update_role(event.role)

        await self.dispatch(event)

    async def on_guild_role_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-delete for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Role] = None
        if self._cache:
            old = self._cache.delete_role(snowflakes.Snowflake(payload[&#34;role_id&#34;]))

        event = self._event_factory.deserialize_guild_role_delete_event(shard, payload, old_role=old)

        await self.dispatch(event)

    async def on_invite_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_invite_create_event(shard, payload)

        if self._cache:
            self._cache.set_invite(event.invite)

        await self.dispatch(event)

    async def on_invite_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-delete for more info.&#34;&#34;&#34;
        old: typing.Optional[invites.InviteWithMetadata] = None
        if self._cache:
            old = self._cache.delete_invite(payload[&#34;code&#34;])

        event = self._event_factory.deserialize_invite_delete_event(shard, payload, old_invite=old)

        await self.dispatch(event)

    async def on_message_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_create_event(shard, payload)

        if self._cache:
            self._cache.set_message(event.message)

        await self.dispatch(event)

    async def on_message_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-update for more info.&#34;&#34;&#34;
        old = self._cache.get_message(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_message_update_event(shard, payload, old_message=old)

        if self._cache:
            self._cache.update_message(event.message)

        await self.dispatch(event)

    async def on_message_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_delete_event(shard, payload)

        if self._cache:
            self._cache.delete_message(event.message_id)

        await self.dispatch(event)

    async def on_message_delete_bulk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete-bulk for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_delete_bulk_event(shard, payload)

        if self._cache:
            for message_id in event.message_ids:
                self._cache.delete_message(message_id)

        await self.dispatch(event)

    async def on_message_reaction_add(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-add for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_add_event(shard, payload))

    # TODO: this is unlikely but reaction cache?

    async def on_message_reaction_remove(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_event(shard, payload))

    async def on_message_reaction_remove_all(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_all_event(shard, payload))

    async def on_message_reaction_remove_emoji(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_emoji_event(shard, payload))

    async def on_presence_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#presence-update for more info.&#34;&#34;&#34;
        old: typing.Optional[presences.MemberPresence] = None
        if self._cache:
            old = self._cache.get_presence(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_presence_update_event(shard, payload, old_presence=old)

        if self._cache and event.presence.visible_status is presences.Status.OFFLINE:
            self._cache.delete_presence(event.presence.guild_id, event.presence.user_id)
        elif self._cache:
            self._cache.update_presence(event.presence)

        # TODO: update user here when partial_user is set self._cache.update_user(event.partial_user)
        await self.dispatch(event)

    async def on_typing_start(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#typing-start for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_typing_start_event(shard, payload))

    async def on_user_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#user-update for more info.&#34;&#34;&#34;
        old = self._cache.get_me() if self._cache else None
        event = self._event_factory.deserialize_own_user_update_event(shard, payload, old_user=old)

        if self._cache:
            self._cache.update_me(event.user)

        await self.dispatch(event)

    async def on_voice_state_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-state-update for more info.&#34;&#34;&#34;
        old: typing.Optional[voices.VoiceState] = None
        if self._cache:
            old = self._cache.get_voice_state(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user_id&#34;])
            )

        event = self._event_factory.deserialize_voice_state_update_event(shard, payload, old_state=old)

        if self._cache and event.state.channel_id is None:
            self._cache.delete_voice_state(event.state.guild_id, event.state.user_id)
        elif self._cache:
            self._cache.update_voice_state(event.state)

        await self.dispatch(event)

    async def on_voice_server_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-server-update for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_voice_server_update_event(shard, payload))

    async def on_webhooks_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#webhooks-update for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_webhook_update_event(shard, payload))

    async def on_interaction_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#interaction-create for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_interaction_create_event(shard, payload))</code></pre>
</details>
</div>
</div>
<h2 id="class-heading">Classes</h2>
<section class="definition">
<dl class="no-nest root">
<div id="hikari.impl.event_manager.EventManagerImpl" class="anchor">
<dt>
<h4><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventManagerImpl -- Provides event handling logic for Discord events." href="#hikari.impl.event_manager.EventManagerImpl"
>EventManagerImpl</a></h4>
</dt>
<dd>
<pre><code id="hikari.impl.event_manager.EventManagerImpl" class="hljs python"><abbr title='A standard Python type.'>class</abbr> EventManagerImpl (
    event_factory: <a href='../api/event_factory.html#hikari.api.event_factory.EventFactory'>event_factory_.EventFactory</a>,
    intents: <a href='../intents.html#hikari.intents.Intents'>intents_.Intents</a>,
    /,
    *,
    cache: <a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='../api/cache.html#hikari.api.cache.MutableCache'>cache_.MutableCache</a>] = None,
): ...</code></pre>
<p>Provides event handling logic for Discord events.</p>
<div class="sep"></div>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L75-L494" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">class EventManagerImpl(event_manager_base.EventManagerBase):
    &#34;&#34;&#34;Provides event handling logic for Discord events.&#34;&#34;&#34;

    __slots__: typing.Sequence[str] = (&#34;_cache&#34;,)

    def __init__(
        self,
        event_factory: event_factory_.EventFactory,
        intents: intents_.Intents,
        /,
        *,
        cache: typing.Optional[cache_.MutableCache] = None,
    ) -&gt; None:
        self._cache = cache
        super().__init__(event_factory=event_factory, intents=intents)

    async def on_ready(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#ready for more info.&#34;&#34;&#34;
        # TODO: cache unavailable guilds on startup, I didn&#39;t bother for the time being.
        event = self._event_factory.deserialize_ready_event(shard, payload)

        if self._cache:
            self._cache.update_me(event.my_user)

        await self.dispatch(event)

    async def on_resumed(self, shard: gateway_shard.GatewayShard, _: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#resumed for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_resumed_event(shard))

    async def on_channel_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_channel_create_event(shard, payload)

        if self._cache:
            assert isinstance(
                event.channel, channels.GuildChannel
            ), &#34;channel create events for DM channels are unexpected&#34;
            self._cache.set_guild_channel(event.channel)

        await self.dispatch(event)

    async def on_channel_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-update for more info.&#34;&#34;&#34;
        old = self._cache.get_guild_channel(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_channel_update_event(shard, payload, old_channel=old)

        if self._cache:
            assert isinstance(
                event.channel, channels.GuildChannel
            ), &#34;channel update events for DM channels are unexpected&#34;
            self._cache.update_guild_channel(event.channel)

        await self.dispatch(event)

    async def on_channel_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-delete for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_channel_delete_event(shard, payload)

        if self._cache:
            self._cache.delete_guild_channel(event.channel.id)

        await self.dispatch(event)

    async def on_channel_pins_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-pins-update for more info.&#34;&#34;&#34;
        # TODO: we need a method for this specifically
        await self.dispatch(self._event_factory.deserialize_channel_pins_update_event(shard, payload))

    async def on_guild_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_create_event(shard, payload)

        if self._cache:
            self._cache.update_guild(event.guild)

            self._cache.clear_guild_channels_for_guild(event.guild.id)
            for channel in event.channels.values():
                self._cache.set_guild_channel(channel)

            self._cache.clear_emojis_for_guild(event.guild.id)
            for emoji in event.emojis.values():
                self._cache.set_emoji(emoji)

            self._cache.clear_roles_for_guild(event.guild.id)
            for role in event.roles.values():
                self._cache.set_role(role)

            # TODO: do we really want to invalidate these all after an outage.
            self._cache.clear_members_for_guild(event.guild.id)
            for member in event.members.values():
                self._cache.set_member(member)

            self._cache.clear_presences_for_guild(event.guild.id)
            for presence in event.presences.values():
                self._cache.set_presence(presence)

            self._cache.clear_voice_states_for_guild(event.guild.id)
            for voice_state in event.voice_states.values():
                self._cache.set_voice_state(voice_state)

            members_declared = self._intents &amp; intents_.Intents.GUILD_MEMBERS
            presences_declared = self._intents &amp; intents_.Intents.GUILD_PRESENCES

            # When intents are enabled discord will only send other member objects on the guild create
            # payload if presence intents are also declared, so if this isn&#39;t the case then we also want
            # to chunk small guilds.
            if members_declared and (event.guild.is_large or not presences_declared):
                # We create a task here instead of awaiting the result to avoid any rate-limits from delaying dispatch.
                nonce = f&#34;{shard.id}.{_fixed_size_nonce()}&#34;
                event.chunk_nonce = nonce
                coroutine = _request_guild_members(
                    shard, event.guild, include_presences=bool(presences_declared), nonce=nonce
                )
                asyncio.create_task(coroutine, name=f&#34;{shard.id}:{event.guild.id} guild create members request&#34;)

        await self.dispatch(event)

    async def on_guild_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-update for more info.&#34;&#34;&#34;
        old = self._cache.get_guild(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_guild_update_event(shard, payload, old_guild=old)

        if self._cache:
            self._cache.update_guild(event.guild)

            self._cache.clear_roles_for_guild(event.guild.id)
            for role in event.roles.values():  # TODO: do we actually get this here?
                self._cache.set_role(role)

            self._cache.clear_emojis_for_guild(event.guild.id)  # TODO: do we actually get this here?
            for emoji in event.emojis.values():
                self._cache.set_emoji(emoji)

        await self.dispatch(event)

    async def on_guild_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-delete for more info.&#34;&#34;&#34;
        event: typing.Union[guild_events.GuildUnavailableEvent, guild_events.GuildLeaveEvent]
        if payload.get(&#34;unavailable&#34;, False):
            event = self._event_factory.deserialize_guild_unavailable_event(shard, payload)

            if self._cache:
                self._cache.set_guild_availability(event.guild_id, False)

        else:
            event = self._event_factory.deserialize_guild_leave_event(shard, payload)

            if self._cache:
                #  TODO: this doesn&#39;t work in all intent scenarios
                self._cache.delete_guild(event.guild_id)
                self._cache.clear_voice_states_for_guild(event.guild_id)
                self._cache.clear_invites_for_guild(event.guild_id)
                self._cache.clear_members_for_guild(event.guild_id)
                self._cache.clear_presences_for_guild(event.guild_id)
                self._cache.clear_guild_channels_for_guild(event.guild_id)
                self._cache.clear_emojis_for_guild(event.guild_id)
                self._cache.clear_roles_for_guild(event.guild_id)

        await self.dispatch(event)

    async def on_guild_ban_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-add for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_guild_ban_add_event(shard, payload))

    async def on_guild_ban_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-remove for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_guild_ban_remove_event(shard, payload))

    async def on_guild_emojis_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-emojis-update for more info.&#34;&#34;&#34;
        guild_id = snowflakes.Snowflake(payload[&#34;guild_id&#34;])
        old = list(self._cache.clear_emojis_for_guild(guild_id).values()) if self._cache else None

        event = self._event_factory.deserialize_guild_emojis_update_event(shard, payload, old_emojis=old)

        if self._cache:
            for emoji in event.emojis:
                self._cache.set_emoji(emoji)

        await self.dispatch(event)

    async def on_guild_integrations_update(self, _: gateway_shard.GatewayShard, __: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-integrations-update for more info.&#34;&#34;&#34;
        # This is only here to stop this being logged or dispatched as an &#34;unknown event&#34;.
        # This event is made redundant by INTEGRATION_CREATE/DELETE/UPDATE and is thus not parsed or dispatched.
        return None

    async def on_integration_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_create_event(shard, payload)
        await self.dispatch(event)

    async def on_integration_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_delete_event(shard, payload)
        await self.dispatch(event)

    async def on_integration_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        event = self._event_factory.deserialize_integration_update_event(shard, payload)
        await self.dispatch(event)

    async def on_guild_member_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-add for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_member_add_event(shard, payload)

        if self._cache:
            self._cache.update_member(event.member)

        await self.dispatch(event)

    async def on_guild_member_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-remove for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Member] = None
        if self._cache:
            old = self._cache.delete_member(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_guild_member_remove_event(shard, payload, old_member=old)
        await self.dispatch(event)

    async def on_guild_member_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-update for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Member] = None
        if self._cache:
            old = self._cache.get_member(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_guild_member_update_event(shard, payload, old_member=old)

        if self._cache:
            self._cache.update_member(event.member)

        await self.dispatch(event)

    async def on_guild_members_chunk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-members-chunk for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_member_chunk_event(shard, payload)

        if self._cache:
            for member in event.members.values():
                self._cache.set_member(member)

            for presence in event.presences.values():
                self._cache.set_presence(presence)

        await self.dispatch(event)

    async def on_guild_role_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_guild_role_create_event(shard, payload)

        if self._cache:
            self._cache.set_role(event.role)

        await self.dispatch(event)

    async def on_guild_role_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-update for more info.&#34;&#34;&#34;
        old = self._cache.get_role(snowflakes.Snowflake(payload[&#34;role&#34;][&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_guild_role_update_event(shard, payload, old_role=old)

        if self._cache:
            self._cache.update_role(event.role)

        await self.dispatch(event)

    async def on_guild_role_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-delete for more info.&#34;&#34;&#34;
        old: typing.Optional[guilds.Role] = None
        if self._cache:
            old = self._cache.delete_role(snowflakes.Snowflake(payload[&#34;role_id&#34;]))

        event = self._event_factory.deserialize_guild_role_delete_event(shard, payload, old_role=old)

        await self.dispatch(event)

    async def on_invite_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_invite_create_event(shard, payload)

        if self._cache:
            self._cache.set_invite(event.invite)

        await self.dispatch(event)

    async def on_invite_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-delete for more info.&#34;&#34;&#34;
        old: typing.Optional[invites.InviteWithMetadata] = None
        if self._cache:
            old = self._cache.delete_invite(payload[&#34;code&#34;])

        event = self._event_factory.deserialize_invite_delete_event(shard, payload, old_invite=old)

        await self.dispatch(event)

    async def on_message_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-create for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_create_event(shard, payload)

        if self._cache:
            self._cache.set_message(event.message)

        await self.dispatch(event)

    async def on_message_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-update for more info.&#34;&#34;&#34;
        old = self._cache.get_message(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
        event = self._event_factory.deserialize_message_update_event(shard, payload, old_message=old)

        if self._cache:
            self._cache.update_message(event.message)

        await self.dispatch(event)

    async def on_message_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_delete_event(shard, payload)

        if self._cache:
            self._cache.delete_message(event.message_id)

        await self.dispatch(event)

    async def on_message_delete_bulk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete-bulk for more info.&#34;&#34;&#34;
        event = self._event_factory.deserialize_message_delete_bulk_event(shard, payload)

        if self._cache:
            for message_id in event.message_ids:
                self._cache.delete_message(message_id)

        await self.dispatch(event)

    async def on_message_reaction_add(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-add for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_add_event(shard, payload))

    # TODO: this is unlikely but reaction cache?

    async def on_message_reaction_remove(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_event(shard, payload))

    async def on_message_reaction_remove_all(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_all_event(shard, payload))

    async def on_message_reaction_remove_emoji(
        self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
    ) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_message_reaction_remove_emoji_event(shard, payload))

    async def on_presence_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#presence-update for more info.&#34;&#34;&#34;
        old: typing.Optional[presences.MemberPresence] = None
        if self._cache:
            old = self._cache.get_presence(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
            )

        event = self._event_factory.deserialize_presence_update_event(shard, payload, old_presence=old)

        if self._cache and event.presence.visible_status is presences.Status.OFFLINE:
            self._cache.delete_presence(event.presence.guild_id, event.presence.user_id)
        elif self._cache:
            self._cache.update_presence(event.presence)

        # TODO: update user here when partial_user is set self._cache.update_user(event.partial_user)
        await self.dispatch(event)

    async def on_typing_start(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#typing-start for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_typing_start_event(shard, payload))

    async def on_user_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#user-update for more info.&#34;&#34;&#34;
        old = self._cache.get_me() if self._cache else None
        event = self._event_factory.deserialize_own_user_update_event(shard, payload, old_user=old)

        if self._cache:
            self._cache.update_me(event.user)

        await self.dispatch(event)

    async def on_voice_state_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-state-update for more info.&#34;&#34;&#34;
        old: typing.Optional[voices.VoiceState] = None
        if self._cache:
            old = self._cache.get_voice_state(
                snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user_id&#34;])
            )

        event = self._event_factory.deserialize_voice_state_update_event(shard, payload, old_state=old)

        if self._cache and event.state.channel_id is None:
            self._cache.delete_voice_state(event.state.guild_id, event.state.user_id)
        elif self._cache:
            self._cache.update_voice_state(event.state)

        await self.dispatch(event)

    async def on_voice_server_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-server-update for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_voice_server_update_event(shard, payload))

    async def on_webhooks_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#webhooks-update for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_webhook_update_event(shard, payload))

    async def on_interaction_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
        &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#interaction-create for more info.&#34;&#34;&#34;
        await self.dispatch(self._event_factory.deserialize_interaction_create_event(shard, payload))</code></pre>
</details>
<div class="sep"></div>
<h5>Method resolution order</h5>
<dl>
<dt class="nested"><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventManagerImpl -- Provides event handling logic for Discord events." href="#hikari.impl.event_manager.EventManagerImpl"
>EventManagerImpl</a></dt>
<dd class="nested"><em class="text-muted">That's this class!</em></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></dt>
<dd class="nested"><p>Provides functionality to consume and dispatch events …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='An abstract base class which may have abstract methods and abstract properties.'>abstract</abbr> <abbr title='A standard Python type.'>class</abbr></em></small> <a title="EventManager -- Base interface for event manager implementations …" href="../api/event_manager.html#hikari.api.event_manager.EventManager"
>EventManager</a></dt>
<dd class="nested"><p>Base interface for event manager implementations …</p></dd>
<dt class="nested"><small class='text-muted'><em><abbr title='Anything that is external to this library.'>extern</abbr> class</em></small> <a title="abc.ABC -- Helper class that provides a standard way to create an ABC using
inheritance." href="https://docs.python.org/3/library/abc.html#abc.ABC"
>abc.ABC</a></dt>
<dd class="nested"><p>Helper class that provides a standard way to create an ABC using
inheritance.</p></dd>
</dl>
<div class="sep"></div>
<h5>Methods</h5>
<dl>
<div id="hikari.impl.event_manager.EventManagerImpl.consume_raw_event" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="consume_raw_event" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.consume_raw_event" id="hikari.impl.event_manager.EventManagerImpl.consume_raw_event">consume_raw_event</a>(
    event_name: <a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a>,
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="consume_raw_event -- Consume a raw event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.consume_raw_event"
>consume_raw_event</a></code>
</p>
<p>Consume a raw event.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_name</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/stdtypes.html#str'>str</a></code></dt>
<dd>The case-insensitive name of the event being triggered.</dd>
<dt><strong><code>shard</code></strong> :&ensp;<code><a href='../api/shard.html#hikari.api.shard.GatewayShard'>GatewayShard</a></code></dt>
<dd>Object of the shard that received this event.</dd>
<dt><strong><code>payload</code></strong> :&ensp;<code><a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>JSONObject</a></code></dt>
<dd>Payload of the event being triggered.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/exceptions.html#LookupError'>LookupError</a></code></dt>
<dd>If there is no consumer for the event.</dd>
</dl>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.dispatch" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="dispatch" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.dispatch" id="hikari.impl.event_manager.EventManagerImpl.dispatch">dispatch</a>(
    event: event_manager_.EventT_inv,
) -> <a href='https://docs.python.org/3/library/asyncio-future.html#asyncio.Future'>Future</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="dispatch -- Dispatch an event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.dispatch"
>dispatch</a></code>
</p>
<p>Dispatch an event.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event</code></strong> :&ensp;<code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code></dt>
<dd>The event to dispatch.</dd>
</dl>
<h2 id="example">Example</h2>
<p>We can dispatch custom events by first defining a class that
derives from <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</p>
<pre><code class="language-py">import attr

from hikari.traits import RESTAware
from hikari.events.base_events import Event
from hikari.users import User
from hikari.snowflakes import Snowflake

@attr.define()
class EveryoneMentionedEvent(Event):
    app: RESTAware = attr.field()

    author: User = attr.field()
    '''The user who mentioned everyone.'''

    content: str = attr.field()
    '''The message that was sent.'''

    message_id: Snowflake = attr.field()
    '''The message ID.'''

    channel_id: Snowflake = attr.field()
    '''The channel ID.'''
</code></pre>
<p>We can then dispatch our event as we see fit.</p>
<pre><code class="language-py">from hikari.events.messages import MessageCreateEvent

@bot.listen(MessageCreateEvent)
async def on_message(event):
    if &quot;@everyone&quot; in event.content or &quot;@here&quot; in event.content:
        event = EveryoneMentionedEvent(
            author=event.author,
            content=event.content,
            message_id=event.id,
            channel_id=event.channel_id,
        )

        bot.dispatch(event)
</code></pre>
<p>This event can be listened to elsewhere by subscribing to it with
<code>EventManager.subscribe</code>.</p>
<pre><code class="language-py">@bot.listen(EveryoneMentionedEvent)
async def on_everyone_mentioned(event):
    print(event.user, &quot;just pinged everyone in&quot;, event.channel_id)
</code></pre>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/asyncio-future.html#asyncio.Future'>Future</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>]</code></dt>
<dd>A future that can be optionally awaited. If awaited, the future
will complete once all corresponding event listeners have been
invoked. If not awaited, this will schedule the dispatch of the
events in the background for later.</dd>
</dl>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>Subscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.subscribe'>subscribe</a></code></dd>
<dt><code>Stream</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.stream'>stream</a></code>
<code>Wait <a href='https://docs.python.org/3/reference/compound_stmts.html#for'>for</a>: </code>hikari.api.event_manager.EventManager.wait_for``</dd>
</dl>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.get_listeners" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="get_listeners" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.get_listeners" id="hikari.impl.event_manager.EventManagerImpl.get_listeners">get_listeners</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co],
    /,
    *,
    polymorphic: <a href='https://docs.python.org/3/library/functions.html#bool'>bool</a> = True,
) -> <a href='https://docs.python.org/3/library/typing.html#typing.Collection'>Collection</a>[event_manager_.CallbackT[event_manager_.EventT_co]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="get_listeners -- Get the listeners for a given event type, if there are any …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.get_listeners"
>get_listeners</a></code>
</p>
<p>Get the listeners for a given event type, if there are any.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[T]</code></dt>
<dd>The event type to look for.
<code>T</code> must be a subclass of <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</dd>
<dt><strong><code>polymorphic</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/functions.html#bool'>bool</a></code></dt>
<dd>If <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code>, this will also return the listeners of the
subclasses of the given event type. If <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code>, then
only listeners for this class specifically are returned. The
default is <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/typing.html#typing.Collection'>Collection</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[T], <a href='https://docs.python.org/3/library/typing.html#typing.Coroutine'>Coroutine</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>, <a href='https://docs.python.org/3/library/typing.html#typing.Any'>Any</a>, <a href='https://docs.python.org/3/library/constants.html#None'>None</a>]]</code></dt>
<dd>
<p>A copy of the collection of listeners for the event. Will return
an empty collection if nothing is registered.</p>
<p><code>T</code> must be a subclass of <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</p>
</dd>
</dl>
<h2 id="see-also">See Also</h2>
<p><code>Has listener: </code>hikari.api.event_manager.EventManager.has_listener``</p>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.listen" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="listen" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.listen" id="hikari.impl.event_manager.EventManagerImpl.listen">listen</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co]] = None,
) -> <a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[event_manager_.CallbackT[event_manager_.EventT_co]], event_manager_.CallbackT[event_manager_.EventT_co]]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="listen -- Generate a decorator to subscribe a callback to an event type …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.listen"
>listen</a></code>
</p>
<p>Generate a decorator to subscribe a callback to an event type.</p>
<p>This is a second-order decorator.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[T]]</code></dt>
<dd>
<p>The event type to subscribe to. The implementation may allow this
to be undefined. If this is the case, the event type will be inferred
instead from the type hints on the function signature.</p>
<p><code>T</code> must be a subclass of <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</p>
</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/typing.html#typing.Callable'>Callable</a>[[T], T]</code></dt>
<dd>A decorator for a coroutine function that passes it to
<code>EventManager.subscribe</code> before returning the function
reference.</dd>
</dl>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>Dispatch</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.dispatch'>dispatch</a></code></dd>
<dt><code>Stream</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.stream'>stream</a></code></dd>
<dt><code>Subscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.subscribe'>subscribe</a></code></dd>
<dt><code>Unsubscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.unsubscribe'>unsubscribe</a></code>
<code>Wait <a href='https://docs.python.org/3/reference/compound_stmts.html#for'>for</a>: </code>hikari.api.event_manager.EventManager.wait_for``</dd>
</dl>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_channel_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_channel_create" href="#hikari.impl.event_manager.EventManagerImpl.on_channel_create" id="hikari.impl.event_manager.EventManagerImpl.on_channel_create">on_channel_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#channel-create">https://discord.com/developers/docs/topics/gateway#channel-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L105-L115" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_channel_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-create for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_channel_create_event(shard, payload)

    if self._cache:
        assert isinstance(
            event.channel, channels.GuildChannel
        ), &#34;channel create events for DM channels are unexpected&#34;
        self._cache.set_guild_channel(event.channel)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_channel_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_channel_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_channel_delete" id="hikari.impl.event_manager.EventManagerImpl.on_channel_delete">on_channel_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#channel-delete">https://discord.com/developers/docs/topics/gateway#channel-delete</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L130-L137" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_channel_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-delete for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_channel_delete_event(shard, payload)

    if self._cache:
        self._cache.delete_guild_channel(event.channel.id)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_channel_pins_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_channel_pins_update" href="#hikari.impl.event_manager.EventManagerImpl.on_channel_pins_update" id="hikari.impl.event_manager.EventManagerImpl.on_channel_pins_update">on_channel_pins_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#channel-pins-update">https://discord.com/developers/docs/topics/gateway#channel-pins-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L139-L142" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_channel_pins_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-pins-update for more info.&#34;&#34;&#34;
    # TODO: we need a method for this specifically
    await self.dispatch(self._event_factory.deserialize_channel_pins_update_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_channel_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_channel_update" href="#hikari.impl.event_manager.EventManagerImpl.on_channel_update" id="hikari.impl.event_manager.EventManagerImpl.on_channel_update">on_channel_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#channel-update">https://discord.com/developers/docs/topics/gateway#channel-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L117-L128" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_channel_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#channel-update for more info.&#34;&#34;&#34;
    old = self._cache.get_guild_channel(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
    event = self._event_factory.deserialize_channel_update_event(shard, payload, old_channel=old)

    if self._cache:
        assert isinstance(
            event.channel, channels.GuildChannel
        ), &#34;channel update events for DM channels are unexpected&#34;
        self._cache.update_guild_channel(event.channel)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_ban_add" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_ban_add" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_ban_add" id="hikari.impl.event_manager.EventManagerImpl.on_guild_ban_add">on_guild_ban_add</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-ban-add">https://discord.com/developers/docs/topics/gateway#guild-ban-add</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L236-L238" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_ban_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-add for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_guild_ban_add_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_ban_remove" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_ban_remove" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_ban_remove" id="hikari.impl.event_manager.EventManagerImpl.on_guild_ban_remove">on_guild_ban_remove</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-ban-remove">https://discord.com/developers/docs/topics/gateway#guild-ban-remove</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L240-L242" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_ban_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-ban-remove for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_guild_ban_remove_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_create" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_create" id="hikari.impl.event_manager.EventManagerImpl.on_guild_create">on_guild_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-create">https://discord.com/developers/docs/topics/gateway#guild-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L144-L191" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-create for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_guild_create_event(shard, payload)

    if self._cache:
        self._cache.update_guild(event.guild)

        self._cache.clear_guild_channels_for_guild(event.guild.id)
        for channel in event.channels.values():
            self._cache.set_guild_channel(channel)

        self._cache.clear_emojis_for_guild(event.guild.id)
        for emoji in event.emojis.values():
            self._cache.set_emoji(emoji)

        self._cache.clear_roles_for_guild(event.guild.id)
        for role in event.roles.values():
            self._cache.set_role(role)

        # TODO: do we really want to invalidate these all after an outage.
        self._cache.clear_members_for_guild(event.guild.id)
        for member in event.members.values():
            self._cache.set_member(member)

        self._cache.clear_presences_for_guild(event.guild.id)
        for presence in event.presences.values():
            self._cache.set_presence(presence)

        self._cache.clear_voice_states_for_guild(event.guild.id)
        for voice_state in event.voice_states.values():
            self._cache.set_voice_state(voice_state)

        members_declared = self._intents &amp; intents_.Intents.GUILD_MEMBERS
        presences_declared = self._intents &amp; intents_.Intents.GUILD_PRESENCES

        # When intents are enabled discord will only send other member objects on the guild create
        # payload if presence intents are also declared, so if this isn&#39;t the case then we also want
        # to chunk small guilds.
        if members_declared and (event.guild.is_large or not presences_declared):
            # We create a task here instead of awaiting the result to avoid any rate-limits from delaying dispatch.
            nonce = f&#34;{shard.id}.{_fixed_size_nonce()}&#34;
            event.chunk_nonce = nonce
            coroutine = _request_guild_members(
                shard, event.guild, include_presences=bool(presences_declared), nonce=nonce
            )
            asyncio.create_task(coroutine, name=f&#34;{shard.id}:{event.guild.id} guild create members request&#34;)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_delete" id="hikari.impl.event_manager.EventManagerImpl.on_guild_delete">on_guild_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-delete">https://discord.com/developers/docs/topics/gateway#guild-delete</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L211-L234" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-delete for more info.&#34;&#34;&#34;
    event: typing.Union[guild_events.GuildUnavailableEvent, guild_events.GuildLeaveEvent]
    if payload.get(&#34;unavailable&#34;, False):
        event = self._event_factory.deserialize_guild_unavailable_event(shard, payload)

        if self._cache:
            self._cache.set_guild_availability(event.guild_id, False)

    else:
        event = self._event_factory.deserialize_guild_leave_event(shard, payload)

        if self._cache:
            #  TODO: this doesn&#39;t work in all intent scenarios
            self._cache.delete_guild(event.guild_id)
            self._cache.clear_voice_states_for_guild(event.guild_id)
            self._cache.clear_invites_for_guild(event.guild_id)
            self._cache.clear_members_for_guild(event.guild_id)
            self._cache.clear_presences_for_guild(event.guild_id)
            self._cache.clear_guild_channels_for_guild(event.guild_id)
            self._cache.clear_emojis_for_guild(event.guild_id)
            self._cache.clear_roles_for_guild(event.guild_id)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_emojis_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_emojis_update" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_emojis_update" id="hikari.impl.event_manager.EventManagerImpl.on_guild_emojis_update">on_guild_emojis_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-emojis-update">https://discord.com/developers/docs/topics/gateway#guild-emojis-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L244-L255" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_emojis_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-emojis-update for more info.&#34;&#34;&#34;
    guild_id = snowflakes.Snowflake(payload[&#34;guild_id&#34;])
    old = list(self._cache.clear_emojis_for_guild(guild_id).values()) if self._cache else None

    event = self._event_factory.deserialize_guild_emojis_update_event(shard, payload, old_emojis=old)

    if self._cache:
        for emoji in event.emojis:
            self._cache.set_emoji(emoji)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_integrations_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_integrations_update" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_integrations_update" id="hikari.impl.event_manager.EventManagerImpl.on_guild_integrations_update">on_guild_integrations_update</a>(
    _: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    __: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-integrations-update">https://discord.com/developers/docs/topics/gateway#guild-integrations-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L257-L261" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_integrations_update(self, _: gateway_shard.GatewayShard, __: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-integrations-update for more info.&#34;&#34;&#34;
    # This is only here to stop this being logged or dispatched as an &#34;unknown event&#34;.
    # This event is made redundant by INTEGRATION_CREATE/DELETE/UPDATE and is thus not parsed or dispatched.
    return None</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_add" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_member_add" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_add" id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_add">on_guild_member_add</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-member-add">https://discord.com/developers/docs/topics/gateway#guild-member-add</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L275-L282" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_member_add(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-add for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_guild_member_add_event(shard, payload)

    if self._cache:
        self._cache.update_member(event.member)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_remove" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_member_remove" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_remove" id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_remove">on_guild_member_remove</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-member-remove">https://discord.com/developers/docs/topics/gateway#guild-member-remove</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L284-L293" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_member_remove(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-remove for more info.&#34;&#34;&#34;
    old: typing.Optional[guilds.Member] = None
    if self._cache:
        old = self._cache.delete_member(
            snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
        )

    event = self._event_factory.deserialize_guild_member_remove_event(shard, payload, old_member=old)
    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_member_update" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_member_update" id="hikari.impl.event_manager.EventManagerImpl.on_guild_member_update">on_guild_member_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-member-update">https://discord.com/developers/docs/topics/gateway#guild-member-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L295-L308" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_member_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-member-update for more info.&#34;&#34;&#34;
    old: typing.Optional[guilds.Member] = None
    if self._cache:
        old = self._cache.get_member(
            snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
        )

    event = self._event_factory.deserialize_guild_member_update_event(shard, payload, old_member=old)

    if self._cache:
        self._cache.update_member(event.member)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_members_chunk" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_members_chunk" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_members_chunk" id="hikari.impl.event_manager.EventManagerImpl.on_guild_members_chunk">on_guild_members_chunk</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-members-chunk">https://discord.com/developers/docs/topics/gateway#guild-members-chunk</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L310-L321" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_members_chunk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-members-chunk for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_guild_member_chunk_event(shard, payload)

    if self._cache:
        for member in event.members.values():
            self._cache.set_member(member)

        for presence in event.presences.values():
            self._cache.set_presence(presence)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_role_create" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_create" id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_create">on_guild_role_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-role-create">https://discord.com/developers/docs/topics/gateway#guild-role-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L323-L330" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_role_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-create for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_guild_role_create_event(shard, payload)

    if self._cache:
        self._cache.set_role(event.role)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_role_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_delete" id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_delete">on_guild_role_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-role-delete">https://discord.com/developers/docs/topics/gateway#guild-role-delete</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L342-L350" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_role_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-delete for more info.&#34;&#34;&#34;
    old: typing.Optional[guilds.Role] = None
    if self._cache:
        old = self._cache.delete_role(snowflakes.Snowflake(payload[&#34;role_id&#34;]))

    event = self._event_factory.deserialize_guild_role_delete_event(shard, payload, old_role=old)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_role_update" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_role_update" id="hikari.impl.event_manager.EventManagerImpl.on_guild_role_update">on_guild_role_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-role-update">https://discord.com/developers/docs/topics/gateway#guild-role-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L332-L340" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_role_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-role-update for more info.&#34;&#34;&#34;
    old = self._cache.get_role(snowflakes.Snowflake(payload[&#34;role&#34;][&#34;id&#34;])) if self._cache else None
    event = self._event_factory.deserialize_guild_role_update_event(shard, payload, old_role=old)

    if self._cache:
        self._cache.update_role(event.role)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_guild_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_guild_update" href="#hikari.impl.event_manager.EventManagerImpl.on_guild_update" id="hikari.impl.event_manager.EventManagerImpl.on_guild_update">on_guild_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#guild-update">https://discord.com/developers/docs/topics/gateway#guild-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L193-L209" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_guild_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#guild-update for more info.&#34;&#34;&#34;
    old = self._cache.get_guild(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
    event = self._event_factory.deserialize_guild_update_event(shard, payload, old_guild=old)

    if self._cache:
        self._cache.update_guild(event.guild)

        self._cache.clear_roles_for_guild(event.guild.id)
        for role in event.roles.values():  # TODO: do we actually get this here?
            self._cache.set_role(role)

        self._cache.clear_emojis_for_guild(event.guild.id)  # TODO: do we actually get this here?
        for emoji in event.emojis.values():
            self._cache.set_emoji(emoji)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_integration_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_integration_create" href="#hikari.impl.event_manager.EventManagerImpl.on_integration_create" id="hikari.impl.event_manager.EventManagerImpl.on_integration_create">on_integration_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L263-L265" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_integration_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    event = self._event_factory.deserialize_integration_create_event(shard, payload)
    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_integration_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_integration_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_integration_delete" id="hikari.impl.event_manager.EventManagerImpl.on_integration_delete">on_integration_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L267-L269" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_integration_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    event = self._event_factory.deserialize_integration_delete_event(shard, payload)
    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_integration_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_integration_update" href="#hikari.impl.event_manager.EventManagerImpl.on_integration_update" id="hikari.impl.event_manager.EventManagerImpl.on_integration_update">on_integration_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L271-L273" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_integration_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    event = self._event_factory.deserialize_integration_update_event(shard, payload)
    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_interaction_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_interaction_create" href="#hikari.impl.event_manager.EventManagerImpl.on_interaction_create" id="hikari.impl.event_manager.EventManagerImpl.on_interaction_create">on_interaction_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#interaction-create">https://discord.com/developers/docs/topics/gateway#interaction-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L492-L494" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_interaction_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#interaction-create for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_interaction_create_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_invite_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_invite_create" href="#hikari.impl.event_manager.EventManagerImpl.on_invite_create" id="hikari.impl.event_manager.EventManagerImpl.on_invite_create">on_invite_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#invite-create">https://discord.com/developers/docs/topics/gateway#invite-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L352-L359" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_invite_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-create for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_invite_create_event(shard, payload)

    if self._cache:
        self._cache.set_invite(event.invite)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_invite_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_invite_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_invite_delete" id="hikari.impl.event_manager.EventManagerImpl.on_invite_delete">on_invite_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#invite-delete">https://discord.com/developers/docs/topics/gateway#invite-delete</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L361-L369" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_invite_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#invite-delete for more info.&#34;&#34;&#34;
    old: typing.Optional[invites.InviteWithMetadata] = None
    if self._cache:
        old = self._cache.delete_invite(payload[&#34;code&#34;])

    event = self._event_factory.deserialize_invite_delete_event(shard, payload, old_invite=old)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_create" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_create" href="#hikari.impl.event_manager.EventManagerImpl.on_message_create" id="hikari.impl.event_manager.EventManagerImpl.on_message_create">on_message_create</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-create">https://discord.com/developers/docs/topics/gateway#message-create</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L371-L378" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_create(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-create for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_message_create_event(shard, payload)

    if self._cache:
        self._cache.set_message(event.message)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_delete" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_delete" href="#hikari.impl.event_manager.EventManagerImpl.on_message_delete" id="hikari.impl.event_manager.EventManagerImpl.on_message_delete">on_message_delete</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-delete">https://discord.com/developers/docs/topics/gateway#message-delete</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L390-L397" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_delete(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_message_delete_event(shard, payload)

    if self._cache:
        self._cache.delete_message(event.message_id)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_delete_bulk" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_delete_bulk" href="#hikari.impl.event_manager.EventManagerImpl.on_message_delete_bulk" id="hikari.impl.event_manager.EventManagerImpl.on_message_delete_bulk">on_message_delete_bulk</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-delete-bulk">https://discord.com/developers/docs/topics/gateway#message-delete-bulk</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L399-L407" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_delete_bulk(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-delete-bulk for more info.&#34;&#34;&#34;
    event = self._event_factory.deserialize_message_delete_bulk_event(shard, payload)

    if self._cache:
        for message_id in event.message_ids:
            self._cache.delete_message(message_id)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_add" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_reaction_add" href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_add" id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_add">on_message_reaction_add</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-reaction-add">https://discord.com/developers/docs/topics/gateway#message-reaction-add</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L409-L413" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_reaction_add(
    self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-add for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_message_reaction_add_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_reaction_remove" href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove" id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove">on_message_reaction_remove</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-reaction-remove">https://discord.com/developers/docs/topics/gateway#message-reaction-remove</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L417-L421" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_reaction_remove(
    self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_message_reaction_remove_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_all" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_reaction_remove_all" href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_all" id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_all">on_message_reaction_remove_all</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all">https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L423-L427" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_reaction_remove_all(
    self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-all for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_message_reaction_remove_all_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_emoji" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_reaction_remove_emoji" href="#hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_emoji" id="hikari.impl.event_manager.EventManagerImpl.on_message_reaction_remove_emoji">on_message_reaction_remove_emoji</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji">https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L429-L433" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_reaction_remove_emoji(
    self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject
) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-reaction-remove-emoji for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_message_reaction_remove_emoji_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_message_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_message_update" href="#hikari.impl.event_manager.EventManagerImpl.on_message_update" id="hikari.impl.event_manager.EventManagerImpl.on_message_update">on_message_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#message-update">https://discord.com/developers/docs/topics/gateway#message-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L380-L388" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_message_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#message-update for more info.&#34;&#34;&#34;
    old = self._cache.get_message(snowflakes.Snowflake(payload[&#34;id&#34;])) if self._cache else None
    event = self._event_factory.deserialize_message_update_event(shard, payload, old_message=old)

    if self._cache:
        self._cache.update_message(event.message)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_presence_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_presence_update" href="#hikari.impl.event_manager.EventManagerImpl.on_presence_update" id="hikari.impl.event_manager.EventManagerImpl.on_presence_update">on_presence_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#presence-update">https://discord.com/developers/docs/topics/gateway#presence-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L435-L451" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_presence_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#presence-update for more info.&#34;&#34;&#34;
    old: typing.Optional[presences.MemberPresence] = None
    if self._cache:
        old = self._cache.get_presence(
            snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user&#34;][&#34;id&#34;])
        )

    event = self._event_factory.deserialize_presence_update_event(shard, payload, old_presence=old)

    if self._cache and event.presence.visible_status is presences.Status.OFFLINE:
        self._cache.delete_presence(event.presence.guild_id, event.presence.user_id)
    elif self._cache:
        self._cache.update_presence(event.presence)

    # TODO: update user here when partial_user is set self._cache.update_user(event.partial_user)
    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_ready" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_ready" href="#hikari.impl.event_manager.EventManagerImpl.on_ready" id="hikari.impl.event_manager.EventManagerImpl.on_ready">on_ready</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#ready">https://discord.com/developers/docs/topics/gateway#ready</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L91-L99" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_ready(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#ready for more info.&#34;&#34;&#34;
    # TODO: cache unavailable guilds on startup, I didn&#39;t bother for the time being.
    event = self._event_factory.deserialize_ready_event(shard, payload)

    if self._cache:
        self._cache.update_me(event.my_user)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_resumed" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_resumed" href="#hikari.impl.event_manager.EventManagerImpl.on_resumed" id="hikari.impl.event_manager.EventManagerImpl.on_resumed">on_resumed</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    _: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#resumed">https://discord.com/developers/docs/topics/gateway#resumed</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L101-L103" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_resumed(self, shard: gateway_shard.GatewayShard, _: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#resumed for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_resumed_event(shard))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_typing_start" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_typing_start" href="#hikari.impl.event_manager.EventManagerImpl.on_typing_start" id="hikari.impl.event_manager.EventManagerImpl.on_typing_start">on_typing_start</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#typing-start">https://discord.com/developers/docs/topics/gateway#typing-start</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L453-L455" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_typing_start(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#typing-start for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_typing_start_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_user_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_user_update" href="#hikari.impl.event_manager.EventManagerImpl.on_user_update" id="hikari.impl.event_manager.EventManagerImpl.on_user_update">on_user_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#user-update">https://discord.com/developers/docs/topics/gateway#user-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L457-L465" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_user_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#user-update for more info.&#34;&#34;&#34;
    old = self._cache.get_me() if self._cache else None
    event = self._event_factory.deserialize_own_user_update_event(shard, payload, old_user=old)

    if self._cache:
        self._cache.update_me(event.user)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_voice_server_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_voice_server_update" href="#hikari.impl.event_manager.EventManagerImpl.on_voice_server_update" id="hikari.impl.event_manager.EventManagerImpl.on_voice_server_update">on_voice_server_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#voice-server-update">https://discord.com/developers/docs/topics/gateway#voice-server-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L484-L486" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_voice_server_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-server-update for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_voice_server_update_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_voice_state_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_voice_state_update" href="#hikari.impl.event_manager.EventManagerImpl.on_voice_state_update" id="hikari.impl.event_manager.EventManagerImpl.on_voice_state_update">on_voice_state_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#voice-state-update">https://discord.com/developers/docs/topics/gateway#voice-state-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L467-L482" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_voice_state_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#voice-state-update for more info.&#34;&#34;&#34;
    old: typing.Optional[voices.VoiceState] = None
    if self._cache:
        old = self._cache.get_voice_state(
            snowflakes.Snowflake(payload[&#34;guild_id&#34;]), snowflakes.Snowflake(payload[&#34;user_id&#34;])
        )

    event = self._event_factory.deserialize_voice_state_update_event(shard, payload, old_state=old)

    if self._cache and event.state.channel_id is None:
        self._cache.delete_voice_state(event.state.guild_id, event.state.user_id)
    elif self._cache:
        self._cache.update_voice_state(event.state)

    await self.dispatch(event)</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.on_webhooks_update" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="on_webhooks_update" href="#hikari.impl.event_manager.EventManagerImpl.on_webhooks_update" id="hikari.impl.event_manager.EventManagerImpl.on_webhooks_update">on_webhooks_update</a>(
    shard: <a href='../api/shard.html#hikari.api.shard.GatewayShard'>gateway_shard.GatewayShard</a>,
    payload: <a href='../internal/data_binding.html#hikari.internal.data_binding.JSONObject'>data_binding.JSONObject</a>,
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p>See <a href="https://discord.com/developers/docs/topics/gateway#webhooks-update">https://discord.com/developers/docs/topics/gateway#webhooks-update</a> for more info.</p>
<details class="source">
<summary>
<span>Expand source code</span>
<br />
<a href="https://github.com/hikari-py/hikari/blob/3bdf1e44d6f73760631a8d27dd70a5783da80ceb/hikari/impl/event_manager.py#L488-L490" class="git-link dotted">Browse git</a>
</summary>
<pre><code class="python">async def on_webhooks_update(self, shard: gateway_shard.GatewayShard, payload: data_binding.JSONObject) -&gt; None:
    &#34;&#34;&#34;See https://discord.com/developers/docs/topics/gateway#webhooks-update for more info.&#34;&#34;&#34;
    await self.dispatch(self._event_factory.deserialize_webhook_update_event(shard, payload))</code></pre>
</details>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.stream" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="stream" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.stream" id="hikari.impl.event_manager.EventManagerImpl.stream">stream</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co],
    /,
    timeout: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/functions.html#float'>float</a>, <a href='https://docs.python.org/3/library/functions.html#int'>int</a>, <a href='https://docs.python.org/3/library/constants.html#None'>None</a>],
    limit: <a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>] = None,
) -> event_manager_.EventStream[event_manager_.EventT_co]: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="stream -- Return a stream iterator for the given event and sub-events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.stream"
>stream</a></code>
</p>
<p>Return a stream iterator for the given event and sub-events.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[<a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a>]</code></dt>
<dd>The event type to listen for. This will listen for subclasses of
this type additionally.</dd>
<dt><strong><code>timeout</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>, <a href='https://docs.python.org/3/library/functions.html#float'>float</a>]</code></dt>
<dd>How long this streamer should wait for the next event before
ending the iteration. If <code><a href='https://docs.python.org/3/library/constants.html#None'>None</a></code> then this will continue
until explicitly broken from.</dd>
<dt><strong><code>limit</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[<a href='https://docs.python.org/3/library/functions.html#int'>int</a>]</code></dt>
<dd>The limit for how many events this should queue at one time before
dropping extra incoming events, leave this as <code><a href='https://docs.python.org/3/library/constants.html#None'>None</a></code> for
the cache size to be unlimited.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>EventStream[<a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a>]</code></dt>
<dd>The async iterator to handle streamed events. This must be started
with <code><a href='https://docs.python.org/3/reference/compound_stmts.html#async'>async</a> <a href='https://docs.python.org/3/reference/compound_stmts.html#with'>with</a> stream:</code> or <code><a href='https://docs.python.org/3/reference/expressions.html#await'>await</a> stream.open()</code> before
asynchronously iterating over it.</dd>
</dl>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>If you use <code><a href='https://docs.python.org/3/reference/expressions.html#await'>await</a> stream.open()</code> to start the stream then you must
also close it with <code><a href='https://docs.python.org/3/reference/expressions.html#await'>await</a> stream.close()</code> otherwise it may queue
events in memory indefinitely.</p>
</div>
<h2 id="examples">Examples</h2>
<pre><code class="language-py">async with bot.stream(events.ReactionAddEvent, timeout=30).filter((&quot;message_id&quot;, message.id)) as stream:
    async for user_id in stream.map(&quot;user_id&quot;).limit(50):
        ...
</code></pre>
<p>or using await <code><a href='https://docs.python.org/3/library/functions.html#open'>open</a>()</code> and await <code>close()</code></p>
<pre><code class="language-py">stream = bot.stream(events.ReactionAddEvent, timeout=30).filter((&quot;message_id&quot;, message.id))
await stream.open()

async for user_id in stream.map(&quot;user_id&quot;).limit(50)
    ...

await stream.close()
</code></pre>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>Dispatch</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.dispatch'>dispatch</a></code></dd>
<dt><code>Listen</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.listen'>listen</a></code></dd>
<dt><code>Subscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.subscribe'>subscribe</a></code></dd>
<dt><code>Unsubscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.unsubscribe'>unsubscribe</a></code>
<code>Wait <a href='https://docs.python.org/3/reference/compound_stmts.html#for'>for</a>: </code>hikari.api.event_manager.EventManager.wait_for``</dd>
</dl>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.subscribe" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="subscribe" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.subscribe" id="hikari.impl.event_manager.EventManagerImpl.subscribe">subscribe</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co],
    callback: event_manager_.CallbackT[event_manager_.EventT_co],
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="subscribe -- Subscribe a given callback to a given event type …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.subscribe"
>subscribe</a></code>
</p>
<p>Subscribe a given callback to a given event type.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[T]</code></dt>
<dd>The event type to listen for. This will also listen for any
subclasses of the given type.
<code>T</code> must be a subclass of <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</dd>
<dt><strong><code>callback</code></strong></dt>
<dd>Must be a coroutine function to invoke. This should
consume an instance of the given event, or an instance of a valid
subclass if one exists. Any result is discarded.</dd>
</dl>
<h2 id="example">Example</h2>
<p>The following demonstrates subscribing a callback to message creation
events.</p>
<pre><code class="language-py">from hikari.events.messages import MessageCreateEvent

async def on_message(event):
    ...

bot.subscribe(MessageCreateEvent, on_message)
</code></pre>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>Listen</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.listen'>listen</a></code></dd>
<dt><code>Stream</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.stream'>stream</a></code>
<code>Wait <a href='https://docs.python.org/3/reference/compound_stmts.html#for'>for</a>: </code>hikari.api.event_manager.EventManager.wait_for``</dd>
</dl>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.unsubscribe" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A standard Python function.'>def</abbr> <a title="unsubscribe" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.unsubscribe" id="hikari.impl.event_manager.EventManagerImpl.unsubscribe">unsubscribe</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co],
    callback: event_manager_.CallbackT[event_manager_.EventT_co],
) -> <a href='https://docs.python.org/3/library/constants.html#None'>None</a>: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="unsubscribe -- Unsubscribe a given callback from a given event type, if present …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.unsubscribe"
>unsubscribe</a></code>
</p>
<p>Unsubscribe a given callback from a given event type, if present.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[T]</code></dt>
<dd>The event type to unsubscribe from. This must be the same exact
type as was originally subscribed with to be removed correctly.
<code>T</code> must derive from <code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code>.</dd>
<dt><strong><code>callback</code></strong></dt>
<dd>The callback to unsubscribe.</dd>
</dl>
<h2 id="example">Example</h2>
<p>The following demonstrates unsubscribing a callback from a message
creation event.</p>
<pre><code class="language-py">from hikari.events.messages import MessageCreateEvent

async def on_message(event):
    ...

bot.unsubscribe(MessageCreateEvent, on_message)
</code></pre>
</dd>
</div>
<div class="sep"></div>
<div id="hikari.impl.event_manager.EventManagerImpl.wait_for" class="anchor">
<dt>
<pre><code class="hljs python"><abbr title='A function that returns a coroutine and must be awaited.'>async def</abbr> <a title="wait_for" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.wait_for" id="hikari.impl.event_manager.EventManagerImpl.wait_for">wait_for</a>(
    event_type: <a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[event_manager_.EventT_co],
    /,
    timeout: <a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/functions.html#float'>float</a>, <a href='https://docs.python.org/3/library/functions.html#int'>int</a>, <a href='https://docs.python.org/3/library/constants.html#None'>None</a>],
    predicate: <a href='https://docs.python.org/3/library/typing.html#typing.Optional'>Optional</a>[event_manager_.PredicateT[event_manager_.EventT_co]] = None,
) -> event_manager_.EventT_co: ...</code></pre>
</dt>
<dd>
<p class="inheritance">
<em><small>Inherited from:</small></em>
<code><a title="EventManagerBase -- Provides functionality to consume and dispatch events …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase"
>EventManagerBase</a></code>.<code><a title="wait_for -- Wait for a given event to occur once, then return the event …" href="event_manager_base.html#hikari.impl.event_manager_base.EventManagerBase.wait_for"
>wait_for</a></code>
</p>
<p>Wait for a given event to occur once, then return the event.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>event_type</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Type'>Type</a>[<a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a>]</code></dt>
<dd>The event type to listen for. This will listen for subclasses of
this type additionally.</dd>
<dt><strong><code>predicate</code></strong></dt>
<dd>
<p>A function taking the event as the single parameter.
This should return <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> if the event is one you want to
return, or <code><a href='https://docs.python.org/3/library/constants.html#False'>False</a></code> if the event should not be returned.
If left as <code><a href='https://docs.python.org/3/library/constants.html#None'>None</a></code> (the default), then the first matching event type
that the bot receives (or any subtype) will be the one returned.</p>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>Async predicates are not supported.</p>
</div>
</dd>
<dt><strong><code>timeout</code></strong> :&ensp;<code><a href='https://docs.python.org/3/library/typing.html#typing.Union'>Union</a>[<a href='https://docs.python.org/3/library/functions.html#float'>float</a>, <a href='https://docs.python.org/3/library/functions.html#int'>int</a>, <a href='https://docs.python.org/3/library/constants.html#None'>None</a>]</code></dt>
<dd>The amount of time to wait before raising an <code><a href='https://docs.python.org/3/library/asyncio-exceptions.html#asyncio.TimeoutError'>TimeoutError</a></code>
and giving up instead. This is measured in seconds. If
<code><a href='https://docs.python.org/3/library/constants.html#None'>None</a></code>, then no timeout will be waited for (no timeout can
result in "leaking" of coroutines that never complete if called in
an uncontrolled way, so is not recommended).</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a href='../events/base_events.html#hikari.events.base_events.Event'>Event</a></code></dt>
<dd>The event that was provided.</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code><a href='https://docs.python.org/3/library/asyncio-exceptions.html#asyncio.TimeoutError'>TimeoutError</a></code></dt>
<dd>If the timeout is not <code><a href='https://docs.python.org/3/library/constants.html#None'>None</a></code> and is reached before an
event is received that the predicate returns <code><a href='https://docs.python.org/3/library/constants.html#True'>True</a></code> for.</dd>
</dl>
<h2 id="see-also">See Also</h2>
<dl>
<dt><code>Listen</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.listen'>listen</a></code></dd>
<dt><code>Stream</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.stream'>stream</a></code></dd>
<dt><code>Subscribe</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.subscribe'>subscribe</a></code></dd>
<dt><code>Dispatch</code></dt>
<dd><code><a href='../api/event_manager.html#hikari.api.event_manager.EventManager.dispatch'>dispatch</a></code></dd>
</dl>
</dd>
</div>
<div class="sep"></div>
</dl>
<div class="sep"></div>
</dd>
</div>
</dl>
</section>
</div>
</div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>